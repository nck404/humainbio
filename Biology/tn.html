<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Tr·∫Øc Nghi·ªám</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --ctp-latte-base: #eff1f5;
            --ctp-latte-mantle: #e6e9ef;
            --ctp-latte-crust: #dce0e8;
            --ctp-latte-text: #4c4f69;
            --ctp-latte-subtext0: #6c6f85;
            --ctp-latte-pink: #ea76cb;
            --ctp-latte-pink-hover: #d74eb8;
            --ctp-latte-pink-light: #f8d4f0;
            --ctp-latte-green: #40a02b;
            --ctp-latte-red: #d20f39;
        }
        
        body {
            background: linear-gradient(135deg, var(--ctp-latte-base) 0%, var(--ctp-latte-mantle) 100%);
            color: var(--ctp-latte-text);
            min-height: 100vh;
        }
        
        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(234, 118, 203, 0.2);
        }
        
        .option-btn {
            transition: all 0.3s ease;
            border: 2px solid var(--ctp-latte-crust);
            background: var(--ctp-latte-base);
        }
        
        .option-btn:hover {
            border-color: var(--ctp-latte-pink);
            background: var(--ctp-latte-pink-light);
            transform: translateY(-2px);
        }
        
        .option-btn.selected {
            border-color: var(--ctp-latte-pink);
            background: var(--ctp-latte-pink-light);
        }
        
        .option-btn.correct {
            border-color: var(--ctp-latte-green);
            background: #d3f9d8;
        }
        
        .option-btn.wrong {
            border-color: var(--ctp-latte-red);
            background: #ffe0e0;
        }
        
        .primary-btn {
            background: var(--ctp-latte-pink);
            color: white;
            transition: all 0.3s ease;
        }
        
        .primary-btn:hover {
            background: var(--ctp-latte-pink-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 118, 203, 0.4);
        }
        
        .progress-bar {
            background: var(--ctp-latte-crust);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--ctp-latte-pink) 0%, var(--ctp-latte-pink-hover) 100%);
            height: 100%;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-3xl mx-auto">
        <!-- Header -->
        <!-- <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2" style="color: var(--ctp-latte-pink);">üéØ Tr·∫Øc Nghi·ªám Online</h1>
            <p class="text-lg" style="color: var(--ctp-latte-subtext0);">Ki·ªÉm tra ki·∫øn th·ª©c c·ªßa b·∫°n</p>
        </div> -->

        <!-- Quiz Container -->
        <div class="quiz-container p-8">
            <!-- Progress -->
            <div class="mb-6">
                <div class="flex justify-between mb-2">
                    <span class="font-semibold">C√¢u <span id="currentQuestion">1</span>/<span id="totalQuestions">20</span></span>
                    <span class="font-semibold">ƒêi·ªÉm: <span id="score">0</span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 5%"></div>
                </div>
            </div>

            <!-- Question -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold mb-6" id="question">ƒêang t·∫£i c√¢u h·ªèi...</h2>
                <div id="options" class="space-y-3"></div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between items-center">
                <button id="prevBtn" class="px-6 py-3 rounded-lg font-semibold option-btn" disabled>
                    ‚Üê C√¢u tr∆∞·ªõc
                </button>
                <button id="nextBtn" class="px-6 py-3 rounded-lg font-semibold primary-btn">
                    C√¢u ti·∫øp ‚Üí
                </button>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="resultModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
            <div class="quiz-container p-8 max-w-md w-full text-center">
                <h2 class="text-3xl font-bold mb-4" style="color: var(--ctp-latte-pink);">üéâ Ho√†n th√†nh!</h2>
                <p class="text-5xl font-bold mb-2" id="finalScore">0/20</p>
                <p class="text-xl mb-6" id="resultMessage">Tuy·ªát v·ªùi!</p>
                <button id="restartBtn" class="px-8 py-3 rounded-lg font-semibold primary-btn w-full">
                    L√†m l·∫°i
                </button>
            </div>
        </div>
    </div>

    <script>
        const defaultQuestions = [
            {"question": "1. C∆° quan n√†o ƒë·∫£m nhi·ªám ch·ª©c nƒÉng l·ªçc m√°u?", "options": ["Tim", "Gan", "Th·∫≠n", "Ph·ªïi"], "correct": 2},
            {"question": "2. H·ªá c∆° quan g·ªìm tim v√† m·∫°ch m√°u g·ªçi l√†:", "options": ["H·ªá b√†i ti·∫øt", "H·ªá tu·∫ßn ho√†n", "H·ªá h√¥ h·∫•p", "H·ªá ti√™u h√≥a"], "correct": 1},
            {"question": "3. Ph·ªïi thu·ªôc h·ªá c∆° quan n√†o?", "options": ["Tu·∫ßn ho√†n", "H√¥ h·∫•p", "Ti√™u h√≥a", "B√†i ti·∫øt"], "correct": 1},
            {"question": "4. D·∫° d√†y c√≥ ch·ª©c nƒÉng ch√≠nh l√†:", "options": ["H·∫•p th·ª• ch·∫•t dinh d∆∞·ª°ng", "V·∫≠n chuy·ªÉn m√°u", "Co b√≥p, ti√™u ho√° c∆° h·ªçc & h√≥a h·ªçc", "Trao ƒë·ªïi kh√≠"], "correct": 2},
            {"question": "5. X∆∞∆°ng v√† kh·ªõp thu·ªôc h·ªá:", "options": ["Ti√™u h√≥a", "H√¥ h·∫•p", "V·∫≠n ƒë·ªông", "Sinh d·ª•c"], "correct": 2},
            {"question": "6. C∆° quan gi√∫p trao ƒë·ªïi kh√≠ v·ªõi m√¥i tr∆∞·ªùng:", "options": ["Ph·ªïi", "Tim", "Gan", "Ru·ªôt non"], "correct": 0},
            {"question": "7. H·ªá b√†i ti·∫øt ch·ªß y·∫øu g·ªìm:", "options": ["Th·∫≠n ‚Äì da ‚Äì ph·ªïi", "Th·∫≠n ‚Äì gan ‚Äì ph·ªïi", "Gan ‚Äì d·∫° d√†y ‚Äì tim", "N√£o ‚Äì tu·ª∑ s·ªëng ‚Äì d√¢y th·∫ßn kinh"], "correct": 0},
            {"question": "8. C∆° quan n√†o kh√¥ng thu·ªôc h·ªá h√¥ h·∫•p?", "options": ["Ph·ªïi", "Kh√≠ qu·∫£n", "Ph·∫ø nang", "D·∫° d√†y"], "correct": 3},
            {"question": "9. Ch·ª©c nƒÉng ch√≠nh c·ªßa gan:", "options": ["L·ªçc m√°u v√† gi·∫£i ƒë·ªôc", "Trao ƒë·ªïi kh√≠", "B∆°m m√°u", "Ti√™u ho√° protein"], "correct": 0},
            {"question": "10. X∆∞∆°ng d√†i nh·∫•t trong c∆° th·ªÉ con ng∆∞·ªùi l√†:", "options": ["X∆∞∆°ng c√°nh tay", "X∆∞∆°ng ƒë√πi", "X∆∞∆°ng ·ªëng ch√¢n", "X∆∞∆°ng s∆∞·ªùn"], "correct": 1},
            {"question": "11. M√°u ƒë∆∞·ª£c b∆°m ƒëi nh·ªù c∆° quan:", "options": ["Gan", "Ph·ªïi", "Tim", "L√°ch"], "correct": 2},
            {"question": "12. H·ªá c∆° quan n√†o ƒëi·ªÅu khi·ªÉn ph·∫£n x·∫°?", "options": ["H·ªá h√¥ h·∫•p", "H·ªá v·∫≠n ƒë·ªông", "H·ªá th·∫ßn kinh", "H·ªá ti√™u h√≥a"], "correct": 2},
            {"question": "13. C∆° quan gi√∫p nghi·ªÅn v√† nh√†o tr·ªôn th·ª©c ƒÉn trong mi·ªáng:", "options": ["L∆∞·ª°i", "RƒÉng", "Tuy·∫øn n∆∞·ªõc b·ªçt", "A & B"], "correct": 3},
            {"question": "14. H·ªá mi·ªÖn d·ªãch c√≥ vai tr√≤:", "options": ["T·∫°o nƒÉng l∆∞·ª£ng", "Ch·ªëng l·∫°i t√°c nh√¢n g√¢y b·ªánh", "Kh·ª≠ ƒë·ªôc", "Trao ƒë·ªïi kh√≠"], "correct": 1},
            {"question": "15. N∆°i di·ªÖn ra ch·ªß y·∫øu h·∫•p th·ª• n∆∞·ªõc:", "options": ["D·∫° d√†y", "Ru·ªôt non", "Ru·ªôt gi√†", "Tr·ª±c tr√†ng"], "correct": 2},
            {"question": "16. H·ªá c∆° quan ƒë·∫£m b·∫£o sinh s·∫£n l√†:", "options": ["H·ªá n·ªôi ti·∫øt", "H·ªá sinh d·ª•c", "H·ªá v·∫≠n ƒë·ªông", "H·ªá b√†i ti·∫øt"], "correct": 1},
            {"question": "17. C∆° ho√†nh thu·ªôc h·ªá:", "options": ["V·∫≠n ƒë·ªông", "H√¥ h·∫•p", "Ti√™u ho√°", "N·ªôi ti·∫øt"], "correct": 1},
            {"question": "18. Ch·ª©c nƒÉng ch√≠nh c·ªßa h·ªá x∆∞∆°ng:", "options": ["B·∫£o v·ªá ‚Äì n√¢ng ƒë·ª° ‚Äì v·∫≠n ƒë·ªông", "H√¥ h·∫•p", "Trao ƒë·ªïi ch·∫•t", "ƒêi·ªÅu ho√† ƒë∆∞·ªùng huy·∫øt"], "correct": 0},
            {"question": "19. H·ªá c∆° quan l·ªõn nh·∫•t trong c∆° th·ªÉ ng∆∞·ªùi theo di·ªán t√≠ch:", "options": ["Da", "H·ªá tu·∫ßn ho√†n", "X∆∞∆°ng", "H·ªá ti√™u h√≥a"], "correct": 0},
            {"question": "20. H·ªá ti√™u h√≥a b·∫Øt ƒë·∫ßu t·ª´:", "options": ["D·∫° d√†y", "Th·ª±c qu·∫£n", "Mi·ªáng", "Ru·ªôt non"], "correct": 2}
        ];

        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];

        // Get query parameter
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Load questions from JSON file or use default
        async function loadQuestions() {
            const queFile = getQueryParam('que');
            
            if (queFile) {
                try {
                    // T·ª± ƒë·ªông th√™m ƒë∆∞·ªùng d·∫´n folder 'c' n·∫øu ch∆∞a c√≥
                    const filePath = queFile.includes('/') ? queFile : `c/${queFile}`;
                    const response = await fetch(filePath);
                    if (response.ok) {
                        questions = await response.json();
                    } else {
                        console.error('Kh√¥ng th·ªÉ t·∫£i file c√¢u h·ªèi, s·ª≠ d·ª•ng c√¢u h·ªèi m·∫∑c ƒë·ªãnh');
                        questions = defaultQuestions;
                    }
                } catch (error) {
                    console.error('L·ªói khi t·∫£i c√¢u h·ªèi:', error);
                    questions = defaultQuestions;
                }
            } else {
                questions = defaultQuestions;
            }

            userAnswers = new Array(questions.length).fill(null);
            displayQuestion();
            updateUI();
        }

        // Display current question
        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            document.getElementById('question').textContent = question.question;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            const isAnswered = userAnswers[currentQuestionIndex] !== null;
            const correctAnswer = question.correct;
            const userAnswer = userAnswers[currentQuestionIndex];
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-full text-left p-4 rounded-lg font-medium';
                button.innerHTML = `<span class="font-bold" style="color: var(--ctp-latte-pink)">${String.fromCharCode(65 + index)}.</span> ${option}`;
                
                if (isAnswered) {
                    button.disabled = true;
                    button.style.cursor = 'default';
                    
                    if (index === correctAnswer) {
                        button.classList.add('correct');
                    } else if (index === userAnswer) {
                        button.classList.add('wrong');
                    }
                } else {
                    button.onclick = () => selectAnswer(index);
                }
                
                optionsDiv.appendChild(button);
            });
        }

        // Select answer
        function selectAnswer(index) {
            if (userAnswers[currentQuestionIndex] !== null) return; // ƒê√£ tr·∫£ l·ªùi r·ªìi
            
            userAnswers[currentQuestionIndex] = index;
            const correctAnswer = questions[currentQuestionIndex].correct;
            
            if (index === correctAnswer) {
                score++;
                document.getElementById('score').textContent = score;
            }
            
            // Hi·ªÉn th·ªã ƒë√∫ng/sai
            const buttons = document.getElementById('options').children;
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].disabled = true;
                buttons[i].style.cursor = 'default';
                
                if (i === correctAnswer) {
                    buttons[i].classList.add('correct');
                } else if (i === index) {
                    buttons[i].classList.add('wrong');
                }
            }
        }

        // Update UI elements
        function updateUI() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('score').textContent = score;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === questions.length - 1 ? 'N·ªôp b√†i' : 'C√¢u ti·∫øp ‚Üí';
        }

        // Next question
        document.getElementById('nextBtn').onclick = () => {
            if (currentQuestionIndex === questions.length - 1) {
                calculateScore();
                showResult();
            } else {
                currentQuestionIndex++;
                displayQuestion();
                updateUI();
            }
        };

        // Previous question
        document.getElementById('prevBtn').onclick = () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateUI();
            }
        };

        // Calculate score
        function calculateScore() {
            score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === questions[index].correct) {
                    score++;
                }
            });
        }

        // Show result
        function showResult() {
            document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
            
            const percentage = (score / questions.length) * 100;
            let message = '';
            
            if (percentage >= 90) message = 'üèÜ Xu·∫•t s·∫Øc!';
            else if (percentage >= 70) message = 'üòä Gi·ªèi l·∫Øm!';
            else if (percentage >= 50) message = 'üëç Kh√° t·ªët!';
            else message = 'üí™ C·ªë g·∫Øng th√™m nh√©!';
            
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultModal').classList.remove('hidden');
        }

        // Restart quiz
        document.getElementById('restartBtn').onclick = () => {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            document.getElementById('resultModal').classList.add('hidden');
            displayQuestion();
            updateUI();
        };

        // Initialize
        loadQuestions();
    </script>
</body>
</html>